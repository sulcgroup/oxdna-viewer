(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,47572,e=>{"use strict";var t=e.i(90425),a=e.i(38898),r=e.i(69496);let s=e=>e?/^[0-9,\s]*$/.test(e)?e.split(",").map(e=>parseInt(e.trim(),10)).filter(e=>!isNaN(e)):(console.warn("Invalid characters in nucleotideIndexes. Aborting script generation."),[]):[];function i({topFile:e,datFile:i,nucleotideIndexes0:o,nucleotideIndexes1:l,height:n="500px",postLoadCommand:d}){let c=(0,a.useRef)(null);return(0,a.useEffect)(()=>{let t=c.current;if(!t?.contentWindow)return;let a=()=>{let a=[{file:e,ext:"top"},{file:i,ext:"dat"}],r=a.map(e=>new Blob([e.file],{type:"text/plain"})),n=a.map(e=>e.ext),c=[],u=s(o);u.length>0&&c.push(`colorElements(new THREE.Color(1, 0, 0), api.getElements([${u.join(",")}]))`);let p=s(l);if(p.length>0&&c.push(`colorElements(new THREE.Color(0, 0, 1), api.getElements([${p.join(",")}]))`),d&&c.push(d),c.length>0){let e=c.join(";\n");r.push(new Blob([e],{type:"application/javascript"})),n.push("js")}t.contentWindow?.postMessage({message:"iframe_drop",files:r,ext:n,inbox_settings:["Monomer","Origin"]},"/")};return t.addEventListener("load",a),()=>{t.removeEventListener("load",a)}},[e,i,o,l,d,c]),(0,t.jsxs)(r.Card,{className:"mt-4",children:[(0,t.jsx)(r.CardHeader,{children:(0,t.jsx)(r.CardTitle,{children:"Structure Preview"})}),(0,t.jsx)(r.CardContent,{children:(0,t.jsx)("iframe",{ref:c,src:"/",width:"100%",height:n,style:{border:"1px solid hsl(var(--border))"},title:"oxDNA Viewer"})})]})}e.s(["OxViewPreview",()=>i])},76930,e=>{"use strict";let t=(0,e.i(93783).default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>t],76930)},69496,e=>{"use strict";var t=e.i(90425),a=e.i(38898),r=e.i(76832);let s=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("div",{ref:s,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...a}));s.displayName="Card";let i=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("div",{ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",e),...a}));i.displayName="CardHeader";let o=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("div",{ref:s,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",e),...a}));o.displayName="CardTitle";let l=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("div",{ref:s,className:(0,r.cn)("text-sm text-muted-foreground",e),...a}));l.displayName="CardDescription";let n=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("div",{ref:s,className:(0,r.cn)("p-6 pt-0",e),...a}));n.displayName="CardContent";let d=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("div",{ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",e),...a}));d.displayName="CardFooter",e.s(["Card",()=>s,"CardContent",()=>n,"CardDescription",()=>l,"CardFooter",()=>d,"CardHeader",()=>i,"CardTitle",()=>o])},3460,e=>{"use strict";function t(e,[t,a]){return Math.min(a,Math.max(t,e))}e.s(["clamp",()=>t])},60031,e=>{"use strict";var t=e.i(90425),a=e.i(38898),r=e.i(36063),s=a.forwardRef((e,a)=>(0,t.jsx)(r.Primitive.label,{...e,ref:a,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));s.displayName="Label";var i=e.i(88177),o=e.i(76832);let l=(0,i.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),n=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(s,{ref:r,className:(0,o.cn)(l(),e),...a}));n.displayName=s.displayName,e.s(["Label",()=>n],60031)},72296,e=>{"use strict";var t=e.i(90425),a=e.i(38898),r=e.i(67684),s=e.i(22332),i=e.i(89978),o=e.i(57612),l=e.i(7992),n=e.i(84240),d=e.i(36063),c="Switch",[u,p]=(0,i.createContextScope)(c),[m,f]=u(c),x=a.forwardRef((e,i)=>{let{__scopeSwitch:l,name:n,checked:u,defaultChecked:p,required:f,disabled:x,value:h="on",onCheckedChange:g,form:j,...v}=e,[w,N]=a.useState(null),C=(0,s.useComposedRefs)(i,e=>N(e)),S=a.useRef(!1),F=!w||j||!!w.closest("form"),[R,k]=(0,o.useControllableState)({prop:u,defaultProp:p??!1,onChange:g,caller:c});return(0,t.jsxs)(m,{scope:l,checked:R,disabled:x,children:[(0,t.jsx)(d.Primitive.button,{type:"button",role:"switch","aria-checked":R,"aria-required":f,"data-state":b(R),"data-disabled":x?"":void 0,disabled:x,value:h,...v,ref:C,onClick:(0,r.composeEventHandlers)(e.onClick,e=>{k(e=>!e),F&&(S.current=e.isPropagationStopped(),S.current||e.stopPropagation())})}),F&&(0,t.jsx)(y,{control:w,bubbles:!S.current,name:n,value:h,checked:R,required:f,disabled:x,form:j,style:{transform:"translateX(-100%)"}})]})});x.displayName=c;var h="SwitchThumb",g=a.forwardRef((e,a)=>{let{__scopeSwitch:r,...s}=e,i=f(h,r);return(0,t.jsx)(d.Primitive.span,{"data-state":b(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:a})});g.displayName=h;var y=a.forwardRef(({__scopeSwitch:e,control:r,checked:i,bubbles:o=!0,...d},c)=>{let u=a.useRef(null),p=(0,s.useComposedRefs)(u,c),m=(0,l.usePrevious)(i),f=(0,n.useSize)(r);return a.useEffect(()=>{let e=u.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(m!==i&&t){let a=new Event("click",{bubbles:o});t.call(e,i),e.dispatchEvent(a)}},[m,i,o]),(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i,...d,tabIndex:-1,ref:p,style:{...d.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function b(e){return e?"checked":"unchecked"}y.displayName="SwitchBubbleInput";var j=e.i(76832);let v=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(x,{className:(0,j.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-gray-300 transition-all duration-200 ease-in-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input hover:shadow-md hover:scale-105 data-[state=checked]:shadow-lg data-[state=checked]:shadow-primary/25",e),...a,ref:r,children:(0,t.jsx)(g,{className:(0,j.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-all duration-200 ease-in-out data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0 data-[state=checked]:shadow-xl border border-gray-300")})}));v.displayName=x.displayName,e.s(["Switch",()=>v],72296)},78183,e=>{"use strict";let t=(0,e.i(93783).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],78183)},23570,e=>{"use strict";let t=(0,e.i(93783).default)("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);e.s(["default",()=>t])},88275,e=>{"use strict";var t=e.i(23570);e.s(["LineChartIcon",()=>t.default])},21318,e=>{"use strict";var t=e.i(90425),a=e.i(38898),r=e.i(76832);let s=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...a}));s.displayName="Textarea",e.s(["Textarea",()=>s])},82681,e=>{"use strict";var t=e.i(90425),a=e.i(38898),r=e.i(84064),s=e.i(55397),i=e.i(56185),o=e.i(90953),l=e.i(80559),n=e.i(89882),d=e.i(44187),c=e.i(72296),u=e.i(81775),p=e.i(89978),m=e.i(22332),f=e.i(30785),x=e.i(67684),h=e.i(23492),g="AlertDialog",[y,b]=(0,p.createContextScope)(g,[f.createDialogScope]),j=(0,f.createDialogScope)(),v=e=>{let{__scopeAlertDialog:a,...r}=e,s=j(a);return(0,t.jsx)(f.Root,{...s,...r,modal:!0})};v.displayName=g,a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,i=j(r);return(0,t.jsx)(f.Trigger,{...i,...s,ref:a})}).displayName="AlertDialogTrigger";var w=e=>{let{__scopeAlertDialog:a,...r}=e,s=j(a);return(0,t.jsx)(f.Portal,{...s,...r})};w.displayName="AlertDialogPortal";var N=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,i=j(r);return(0,t.jsx)(f.Overlay,{...i,...s,ref:a})});N.displayName="AlertDialogOverlay";var C="AlertDialogContent",[S,F]=y(C),R=(0,h.createSlottable)("AlertDialogContent"),k=a.forwardRef((e,r)=>{let{__scopeAlertDialog:s,children:i,...o}=e,l=j(s),n=a.useRef(null),d=(0,m.useComposedRefs)(r,n),c=a.useRef(null);return(0,t.jsx)(f.WarningProvider,{contentName:C,titleName:A,docsSlug:"alert-dialog",children:(0,t.jsx)(S,{scope:s,cancelRef:c,children:(0,t.jsxs)(f.Content,{role:"alertdialog",...l,...o,ref:d,onOpenAutoFocus:(0,x.composeEventHandlers)(o.onOpenAutoFocus,e=>{e.preventDefault(),c.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,t.jsx)(R,{children:i}),(0,t.jsx)(L,{contentRef:n})]})})})});k.displayName=C;var A="AlertDialogTitle",T=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,i=j(r);return(0,t.jsx)(f.Title,{...i,...s,ref:a})});T.displayName=A;var D="AlertDialogDescription",I=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,i=j(r);return(0,t.jsx)(f.Description,{...i,...s,ref:a})});I.displayName=D;var P=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,i=j(r);return(0,t.jsx)(f.Close,{...i,...s,ref:a})});P.displayName="AlertDialogAction";var E="AlertDialogCancel",O=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,{cancelRef:i}=F(E,r),o=j(r),l=(0,m.useComposedRefs)(a,i);return(0,t.jsx)(f.Close,{...o,...s,ref:l})});O.displayName=E;var L=({contentRef:e})=>{let t=`\`${C}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${C}\` by passing a \`${D}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${C}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return a.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},M=e.i(76832);let V=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(N,{className:(0,M.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a,ref:r}));V.displayName=N.displayName;let H=a.forwardRef(({className:e,...a},r)=>(0,t.jsxs)(w,{children:[(0,t.jsx)(V,{}),(0,t.jsx)(k,{ref:r,className:(0,M.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a})]}));H.displayName=k.displayName;let $=({className:e,...a})=>(0,t.jsx)("div",{className:(0,M.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...a});$.displayName="AlertDialogHeader";let z=({className:e,...a})=>(0,t.jsx)("div",{className:(0,M.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...a});z.displayName="AlertDialogFooter";let B=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(T,{ref:r,className:(0,M.cn)("text-lg font-semibold",e),...a}));B.displayName=T.displayName;let q=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(I,{ref:r,className:(0,M.cn)("text-sm text-muted-foreground",e),...a}));q.displayName=I.displayName;let _=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(P,{ref:r,className:(0,M.cn)((0,l.buttonVariants)(),e),...a}));_.displayName=P.displayName;let Y=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(O,{ref:r,className:(0,M.cn)((0,l.buttonVariants)({variant:"outline"}),"mt-2 sm:mt-0",e),...a}));Y.displayName=O.displayName;var U=e.i(21318),J=e.i(3614),W=e.i(91493),K=e.i(42792),X=e.i(22348),Z=e.i(76930),G=e.i(69496),Q=e.i(4126);function ee({jobId:e}){let{user:p}=(0,J.useAuth)(),{toast:m}=(0,X.useToast)(),f=!e,[x,h]=(0,a.useState)(!1),[g,y]=(0,a.useState)(!1),b=(0,a.useMemo)(()=>i.object({analysisType:i.coerce.number({required_error:"Please select an analysis type."}),topology:i.any().optional(),configuration:i.any().optional(),otherFile1:i.any().optional(),otherFile2:i.any().optional(),bool1:i.boolean().optional(),int1:i.coerce.number().optional(),str1:i.string().optional(),str2:i.string().optional(),double1:i.coerce.number().optional(),inlist:i.string().optional(),cpus:i.coerce.number().int().positive().optional()}).superRefine((e,t)=>{if(void 0===e.analysisType)return;let a=K.ANALYSIS_OPTIONS.find(t=>t.value===e.analysisType);if(a)for(let r of a.files)!r.required||!f&&("topology"===r.name||"configuration"===r.name)||e[r.name]instanceof File||t.addIssue({code:o.ZodIssueCode.custom,path:[r.name],message:`${r.label} is required.`})}),[f]),j=(0,s.useForm)({resolver:(0,r.zodResolver)(b),defaultValues:{cpus:1,bool1:!1}}),w=j.watch("analysisType"),N=(0,a.useMemo)(()=>K.ANALYSIS_OPTIONS.find(e=>e.value===w),[w]),C=async t=>{if(!p||!N)return;let a={userID:p.id,analysisType:t.analysisType,cpus:t.cpus||1,bool1:t.bool1,int1:t.int1,str1:t.str1,str2:t.str2,double1:t.double1,inlist:t.inlist,topology:t.topology instanceof File?t.topology:void 0,configuration:t.configuration instanceof File?t.configuration:void 0,otherFile1:t.otherFile1 instanceof File?t.otherFile1:void 0,otherFile2:t.otherFile2 instanceof File?t.otherFile2:void 0};f||(a.jobUuid=e,a.jobLocation=e);try{let e=await W.api.startAnalysisJob(a);m({title:"Analysis Job Submitted",description:`${N.label} analysis started with ID: ${e}.`}),j.reset({...j.getValues(),str1:"",str2:"",int1:void 0,double1:void 0,bool1:!1})}catch(e){console.error("Failed to submit analysis job:",e),m({title:"Submission Failed",description:e.message||"An unknown error occurred.",variant:"destructive"})}},S=async t=>{if(f||!e||!N?.outputFile)return void await C(t);y(!0);try{(await W.api.listJobFiles(e)).files.includes(N.outputFile)?h(!0):await C(t)}catch(e){m({title:"Could not check for existing files.",description:"Proceeding with submission...",variant:"default"}),await C(t)}finally{y(!1)}};return(0,t.jsxs)(n.Form,{...j,children:[(0,t.jsx)(v,{open:x,onOpenChange:h,children:(0,t.jsxs)(H,{children:[(0,t.jsxs)($,{children:[(0,t.jsx)(B,{children:"File Already Exists"}),(0,t.jsxs)(q,{children:["The output file ",(0,t.jsx)("code",{className:"bg-muted px-1 py-0.5 rounded font-semibold",children:N?.outputFile})," already exists for this job. Running this analysis again may overwrite it. Are you sure you want to continue?"]})]}),(0,t.jsxs)(z,{children:[(0,t.jsx)(Y,{children:"Cancel"}),(0,t.jsx)(_,{onClick:()=>C(j.getValues()),children:"Yes, Submit Anyway"})]})]})}),(0,t.jsxs)("form",{onSubmit:j.handleSubmit(S),className:"space-y-6",children:[(0,t.jsx)(n.FormField,{control:j.control,name:"analysisType",render:({field:e})=>(0,t.jsxs)(n.FormItem,{children:[(0,t.jsx)(n.FormLabel,{children:"Analysis Type"}),(0,t.jsxs)(u.Select,{onValueChange:t=>e.onChange(Number(t)),defaultValue:e.value?.toString(),children:[(0,t.jsx)(n.FormControl,{children:(0,t.jsx)(u.SelectTrigger,{children:(0,t.jsx)(u.SelectValue,{placeholder:"Select an analysis protocol..."})})}),(0,t.jsx)(u.SelectContent,{children:K.ANALYSIS_OPTIONS.map(e=>(0,t.jsxs)(u.SelectItem,{value:String(e.value),children:[e.label," (",e.command,")"]},e.value))})]}),N&&(0,t.jsx)(n.FormDescription,{children:N.description}),(0,t.jsx)(n.FormMessage,{})]})}),N&&(0,t.jsxs)(G.Card,{className:"border-dashed",children:[(0,t.jsx)(G.CardHeader,{children:(0,t.jsxs)(G.CardTitle,{children:["Parameters for: ",N.label]})}),(0,t.jsxs)(G.CardContent,{className:"space-y-4",children:[N.files.map(e=>{let a=!f&&("topology"===e.name||"configuration"===e.name);return(0,t.jsx)(n.FormField,{control:j.control,name:e.name,render:({field:r})=>(0,t.jsxs)(n.FormItem,{children:[(0,t.jsxs)(n.FormLabel,{children:[e.label," ",e.required&&!a&&(0,t.jsx)("span",{className:"text-destructive",children:"*"})]}),a?(0,t.jsx)("div",{className:"text-sm p-3 bg-muted rounded-md border text-muted-foreground",children:"âœ“ Using file from the original simulation job."}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.FormControl,{children:(0,t.jsx)(d.Input,{type:"file",onChange:t=>{var a;let r;return a=e.name,r=t.target.files?.[0],void j.setValue(a,r||null,{shouldValidate:!0})}})}),(0,t.jsx)(n.FormDescription,{children:e.description}),(0,t.jsx)(n.FormMessage,{})]})]})},e.name)}),N.params.map(e=>(0,t.jsx)(n.FormField,{control:j.control,name:e.backendName,render:({field:a})=>(0,t.jsxs)(n.FormItem,{children:[(0,t.jsx)(n.FormLabel,{children:e.label}),"boolean"===e.type?(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(n.FormControl,{children:(0,t.jsx)(c.Switch,{checked:!!a.value,onCheckedChange:a.onChange})}),e.description&&(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:e.description})]}):"textarea"===e.type?(0,t.jsx)(n.FormControl,{children:(0,t.jsx)(U.Textarea,{placeholder:e.description,...a,value:String(a.value??"")})}):(0,t.jsx)(n.FormControl,{children:(0,t.jsx)(d.Input,{type:e.type,placeholder:e.description,...a,value:String(a.value??"")})}),(0,t.jsx)(n.FormMessage,{})]})},e.name))]})]}),(0,t.jsx)(Q.Separator,{}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsxs)(l.Button,{type:"submit",size:"lg",disabled:!N||j.formState.isSubmitting||g,children:[(0,t.jsx)(Z.Send,{className:"mr-2 h-5 w-5"}),j.formState.isSubmitting||g?"Submitting...":"Submit Analysis"]})})]})]})}e.s(["default",()=>ee],82681)}]);
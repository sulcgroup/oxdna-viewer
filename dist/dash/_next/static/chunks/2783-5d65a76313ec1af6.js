"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2783],{40025:(e,t,o)=>{o.d(t,{A:()=>u,AuthProvider:()=>l});var r=o(69298),a=o(83130),n=o(12488),c=o(87849),i=o(88115);let s=(0,a.createContext)(void 0),l=e=>{let{children:t}=e,[o,l]=(0,a.useState)(null),[u,d]=(0,a.useState)(!0),f=(0,n.useRouter)();(0,a.useEffect)(()=>{(async()=>{let e=localStorage.getItem("token");if(e)try{let t=(0,i.decode)(e);if(1e3*t.exp>Date.now()){let e=await c.F.getUserProfile();l(e)}else localStorage.removeItem("token"),l(null)}catch(e){console.error("Token verification failed:",e),localStorage.removeItem("token"),l(null)}d(!1)})()},[]);let h=async e=>{try{return await c.F.registerUser(e),await g(e.email,e.passwordLogin)}catch(e){return console.error("Registration failed:",e),!1}},g=async(e,t)=>{d(!0);try{let o=await c.F.loginUser(e,t);if(o.token){localStorage.setItem("token",o.token);let e=await c.F.getUserProfile();return l(e),f.push("/job-status"),d(!1),!0}throw Error("Login failed: No token received")}catch(e){return console.error("Login failed:",e),localStorage.removeItem("token"),l(null),d(!1),!1}};return(0,r.jsx)(s.Provider,{value:{user:o,isAuthenticated:!!o,register:h,login:g,logout:()=>{l(null),localStorage.removeItem("token"),f.push("/login")},loading:u},children:t})},u=()=>{let e=(0,a.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},46583:(e,t,o)=>{o.d(t,{$:()=>l,r:()=>s});var r=o(69298),a=o(83130),n=o(80182),c=o(22554),i=o(26164);let s=(0,c.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=a.forwardRef((e,t)=>{let{className:o,variant:a,size:c,asChild:l=!1,...u}=e,d=l?n.DX:"button";return(0,r.jsx)(d,{className:(0,i.cn)(s({variant:a,size:c,className:o})),ref:t,...u})});l.displayName="Button"},87441:(e,t,o)=>{o.d(t,{p:()=>c});var r=o(69298),a=o(83130),n=o(26164);let c=a.forwardRef((e,t)=>{let{className:o,type:a,...c}=e;return(0,r.jsx)("input",{type:a,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",o),ref:t,...c})});c.displayName="Input"},87849:(e,t,o)=>{o.d(t,{F:()=>n});var r=o(96308);async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.fr,a=await fetch("".concat(o).concat(e),{...t,headers:{"Content-Type":"application/json",...t.headers}});if(!a.ok){let t=await a.text();throw console.error("API Error (".concat(a.status,") on ").concat(e,": ").concat(t)),Error("API request failed: ".concat(a.status," ").concat(a.statusText," - ").concat(t))}let n=a.headers.get("content-type");return n&&n.includes("application/json")?a.json():a.text()}let n={startJob:e=>{let t=new FormData;Object.keys(e).forEach(o=>{let r=e[o];"simulationType"===o?t.append("MD",String("MD"===r)):r instanceof File?t.append(o,r,r.name):null!=r&&t.append(o,String(r))});let o=localStorage.getItem("token");return o?fetch("".concat(r.fr,"/startJobMultipart"),{method:"POST",body:t,headers:{Authorization:"Bearer ".concat(o)}}).then(async e=>{if(!e.ok){let t=await e.text();throw console.error("API Error (".concat(e.status,") on /startJobMultipart: ").concat(t)),Error("API request failed: ".concat(e.status," ").concat(e.statusText," - ").concat(t))}return e.text()}):Promise.reject(Error("No authentication token found."))},runEnhancedSamplingJob:e=>{let t=new FormData;Object.keys(e).forEach(o=>{let r=e[o];"samplingType"!==o&&("proteinFile"===o&&r instanceof File?t.append("protein",r,r.name):r instanceof File?t.append(o,r,r.name):null!=r&&t.append(o,String(r)))});let o=localStorage.getItem("token");return o?fetch("".concat(r.fr,"/runOxdnaUmbrella"),{method:"POST",body:t,headers:{Authorization:"Bearer ".concat(o)}}).then(async e=>{if(!e.ok){let t=await e.text();throw console.error("API Error (".concat(e.status,") on /runOxdnaUmbrella: ").concat(t)),Error("API request failed: ".concat(e.status," ").concat(e.statusText," - ").concat(t))}return e.text()}):Promise.reject(Error("No authentication token found."))},startAnalysisJob:e=>{let t=localStorage.getItem("token");if(!t)return Promise.reject(Error("No authentication token found."));let o=new FormData;return Object.keys(e).forEach(t=>{let r=e[t];r instanceof File?o.append(t,r,r.name):null!=r&&o.append(t,String(r))}),fetch("".concat(r.fr,"/startAnalysisMultipart"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:o}).then(async e=>{if(!e.ok){let t=await e.text();throw console.error("API Error (".concat(e.status,") on /startAnalysisMultipart: ").concat(t)),Error("API request failed: ".concat(e.status," ").concat(e.statusText," - ").concat(t))}return e.text()})},stopJob:e=>{let t=localStorage.getItem("token");return t?a("/stopJob/".concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}}):Promise.reject(Error("No authentication token found."))},stopDocker:e=>{let t=localStorage.getItem("token");return t?a("/stopDocker/".concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}}):Promise.reject(Error("No authentication token found."))},resumeJob:e=>{let t=localStorage.getItem("token");return t?a("/resumeJob/".concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}}):Promise.reject(Error("No authentication token found."))},deleteJob:e=>{let t=localStorage.getItem("token");return t?a("/deleteJob/".concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}}):Promise.reject(Error("No authentication token found."))},changeJobName:(e,t)=>{let o=localStorage.getItem("token");return o?a("/changeJobName",{method:"POST",headers:{Authorization:"Bearer ".concat(o)},body:JSON.stringify({jobId:e,newName:t})}):Promise.reject(Error("No authentication token found."))},getJobStatus:e=>{let t=localStorage.getItem("token");return t?a("/getJobStatus/".concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}}):Promise.reject(Error("No authentication token found."))},getJobsByUser:async e=>{let t=localStorage.getItem("token");if(!t)throw Error("No authentication token found.");try{console.log("2");let e=await a("/getJobs",{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});if(!e||"object"!=typeof e)return console.warn("getJobsByUser received non-object response:",e),[];return Object.values(e)}catch(t){if(console.error("Failed to get jobs for user ".concat(e,":"),t),t instanceof Error&&t.message.includes("404"))return[];throw t}},getEnergyData:async e=>a("/energy/".concat(e,"/0/3"),{method:"GET"}),getServerResources:async()=>Object.entries(await a("/getResources",{method:"GET"})).map((e,t)=>{let[o,r]=e;return{id:o,name:"Server ".concat(t+1),CPUavail:r.CPUavail,GPUavail:r.GPUavail,TotalRam:r.totalRAM,RAMavail:r.RAMavail,totalCPU:r.totalCPU}}),downloadFile:async(e,t)=>{let o=localStorage.getItem("token");if(!o)throw Error("No authentication token found.");let a=await fetch("".concat(r.fr,"/download/").concat(e,"/").concat(t),{method:"GET",headers:{Authorization:"Bearer ".concat(o)}});if(!a.ok){let o=await a.text();throw console.error("Download Error (".concat(a.status,") for ").concat(e,"/").concat(t,": ").concat(o)),Error("Download failed: ".concat(a.status," ").concat(a.statusText," - ").concat(o))}return a.blob()},downloadAllFiles:async e=>{let t=localStorage.getItem("token");if(!t)throw Error("No authentication token found.");let o=await fetch("".concat(r.fr,"/downloadAll/").concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});if(!o.ok){let t=await o.text();throw console.error("Download All Error (".concat(o.status,") for ").concat(e,": ").concat(t)),Error("Download all failed: ".concat(o.status," ").concat(o.statusText," - ").concat(t))}return o.blob()},listJobFiles:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=localStorage.getItem("token");if(!o)throw Error("No authentication token found.");let r=t?"/list/".concat(e,",").concat(t):"/list/".concat(e),n=await a(r,{method:"GET",headers:{Authorization:"Bearer ".concat(o)}}),c=[],i=[];return Object.keys(n).forEach(e=>{if("Folder"===e&&n.Folder)Object.values(n.Folder).forEach(e=>{"string"==typeof e&&c.push(e)});else{let t=n[e];"string"==typeof t&&i.push(t)}}),{files:i.sort(),folders:c.sort()}},getJobFileContent:async(e,t)=>(await n.downloadFile(e,t)).text(),registerUser:async e=>a("/auth/signup",{method:"POST",body:JSON.stringify({firstName:e.firstName,lastName:e.lastName,email:e.email,institutionName:e.instituteName,password:e.passwordLogin})},r.k1),loginUser:async(e,t)=>a("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})},r.k1),getUserProfile:async()=>{let e=localStorage.getItem("token");if(!e)throw Error("No authentication token found.");return console.log(e),a("/auth/profile",{method:"POST",headers:{Authorization:"Bearer ".concat(e)}},r.k1)}}}}]);
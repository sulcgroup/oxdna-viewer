(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[189],{2717:(e,t,n)=>{Promise.resolve().then(n.bind(n,58719))},10549:(e,t,n)=>{"use strict";n.d(t,{$m:()=>d,As:()=>c,nD:()=>a,ub:()=>u});var s=n(95155),r=n(12115),i=n(23478),l=n(79556),o=n(59434);let a=i.bL,c=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)(i.q7,{ref:t,className:(0,o.cn)("border-b",n),...r})});c.displayName="AccordionItem";let d=r.forwardRef((e,t)=>{let{className:n,children:r,...a}=e;return(0,s.jsx)(i.Y9,{className:"flex",children:(0,s.jsxs)(i.l9,{ref:t,className:(0,o.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",n),...a,children:[r,(0,s.jsx)(l.A,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});d.displayName=i.l9.displayName;let u=r.forwardRef((e,t)=>{let{className:n,children:r,...l}=e;return(0,s.jsx)(i.UC,{ref:t,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...l,children:(0,s.jsx)("div",{className:(0,o.cn)("pb-4 pt-0",n),children:r})})});u.displayName=i.UC.displayName},30356:(e,t,n)=>{"use strict";n.d(t,{C:()=>c,z:()=>a});var s=n(95155),r=n(12115),i=n(54059),l=n(70154),o=n(59434);let a=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)(i.bL,{className:(0,o.cn)("grid gap-2",n),...r,ref:t})});a.displayName=i.bL.displayName;let c=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)(i.q7,{ref:t,className:(0,o.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),...r,children:(0,s.jsx)(i.C1,{className:"flex items-center justify-center",children:(0,s.jsx)(l.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});c.displayName=i.q7.displayName},46102:(e,t,n)=>{"use strict";n.d(t,{Bc:()=>o,ZI:()=>d,k$:()=>c,m_:()=>a});var s=n(95155),r=n(12115),i=n(89613),l=n(59434);let o=i.Kq,a=i.bL,c=i.l9,d=r.forwardRef((e,t)=>{let{className:n,sideOffset:r=4,...o}=e;return(0,s.jsx)(i.UC,{ref:t,sideOffset:r,className:(0,l.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...o})});d.displayName=i.UC.displayName},58719:(e,t,n)=>{"use strict";n.d(t,{default:()=>S});var s=n(95155),r=n(12115),i=n(90221),l=n(62177),o=n(55594),a=n(30285),c=n(17759),d=n(62523),u=n(80333),p=n(30356),m=n(10549),x=n(40283),h=n(25731),j=n(91950),f=n(87481),g=n(16923),b=n(68718),y=n(73672),v=n(66695),w=n(22346),N=n(80534),C=n(91540),R=n(67063),I=n(46102),_=n(59409);let M=o.Ik({jobName:o.Yj().optional(),samplingType:o.k5(["Umbrella","ForwardFlux"],{required_error:"You must select a sampling type."}),topology:o.bz().refine(e=>e instanceof File,"Topology file is required."),configuration:o.bz().refine(e=>e instanceof File,"Configuration file is required."),testPreEq:o.zM(),nucleotideIndexes0:o.Yj().min(1,"This field is required."),nucleotideIndexes1:o.Yj().min(1,"This field is required."),xmin:o.au.number(),xmax:o.au.number(),steps:o.au.number().int().positive("Must be a positive number"),cpuRun:o.zM(),T:o.Yj().min(1,"Temperature is required."),saltConc:o.au.number(),nWindows:o.au.number().int().positive("Must be a positive number"),stiff:o.au.number(),cpus:o.au.number().int().positive("Must be a positive number"),interactionType:o.au.number().int().min(0),protein:o.bz().optional(),sequenceDependent:o.zM(),pullingSteps:o.au.number().int().positive("Must be a positive number"),eqSteps:o.au.number().int().positive("Must be a positive number"),meltingTemperature:o.zM(),forceFile:o.bz().optional()});function S(){let{user:e}=(0,x.A)(),{toast:t}=(0,f.dj)(),[n,o]=r.useState(!1),S=(0,l.mN)({resolver:(0,i.u)(M),defaultValues:j.eg});r.useEffect(()=>{let e=sessionStorage.getItem("enhancedSamplingForm");if(e){let t=Object.entries(JSON.parse(e)).reduce((e,t)=>{let[n,s]=t;return["topology","configuration","protein","forceFile"].includes(n)||(e[n]=s),e},{});S.reset(t)}},[S.reset]),r.useEffect(()=>{let e=S.watch(e=>{let t={...e};delete t.topology,delete t.configuration,delete t.protein,delete t.forceFile,sessionStorage.setItem("enhancedSamplingForm",JSON.stringify(t))});return()=>e.unsubscribe()},[S.watch]);let q=async e=>{var n;let s=null==(n=e.target.files)?void 0:n[0];if(s)try{let e=await s.text(),n=N.Hh(e);n.jobName&&S.setValue("jobName",n.jobName),n.nucleotide_indexes_0&&S.setValue("nucleotideIndexes0",n.nucleotide_indexes_0),n.nucleotide_indexes_1&&S.setValue("nucleotideIndexes1",n.nucleotide_indexes_1),n.xmin&&S.setValue("xmin",n.xmin),n.xmax&&S.setValue("xmax",n.xmax),n.stiff&&S.setValue("stiff",n.stiff),n.celcius&&S.setValue("T",String(n.celcius)),n.molarity&&S.setValue("saltConc",n.molarity),n.sequence_dependent&&S.setValue("sequenceDependent",n.sequence_dependent),n.pulling_steps&&S.setValue("pullingSteps",n.pulling_steps),n.equilibration_steps&&S.setValue("eqSteps",n.equilibration_steps),n.production_steps&&S.setValue("steps",n.production_steps),n.test_pulling&&S.setValue("testPreEq",n.test_pulling),n.cpu_run&&S.setValue("cpuRun",n.cpu_run),n.n_cpus&&S.setValue("cpus",n.n_cpus),n.n_windows&&S.setValue("nWindows",n.n_windows),void 0!==n.interaction_type&&null!==n.interaction_type&&S.setValue("interactionType",n.interaction_type),t({title:"YAML file loaded",description:"Form fields have been populated from the uploaded YAML file."})}catch(e){console.error("Error parsing YAML file:",e),t({title:"Error loading YAML file",description:"Could not parse the YAML file. Please check the file format.",variant:"destructive"})}},E=S.watch("nWindows");r.useEffect(()=>{E&&E>0&&S.setValue("cpus",E)},[E,S.setValue]);let V=async(e,n)=>{var s;let r=null==(s=e.target.files)?void 0:s[0];if(r&&(S.setValue(n,r,{shouldValidate:!0}),"topology"===n))try{let e=(await r.text()).split("\n")[0].trim(),n=parseInt(e.split(" ")[0]);if(!isNaN(n)){let e=n>500;S.setValue("cpuRun",!e),t({title:"GPU Setting Updated",description:"Detected ".concat(n," nucleotides. GPU ").concat(e?"enabled":"disabled"," automatically.")})}}catch(e){console.error("Error reading topology file:",e)}};async function z(n){if(!e)return void t({title:"Authentication Error",description:"You must be logged in to submit a job.",variant:"destructive"});let s=parseInt(n.T,10);if(isNaN(s))return void t({title:"Invalid Temperature",description:"Please enter a valid number for temperature.",variant:"destructive"});let r={...n,userID:e.id,T:s,cpus:n.cpus,topology:n.topology,configuration:n.configuration,protein:n.protein instanceof File?n.protein:void 0,forceFile:n.forceFile instanceof File?n.forceFile:void 0};try{let e=await h.F.runEnhancedSamplingJob(r);t({title:"Enhanced Sampling Job Submitted",description:"Job submitted. Backend responded with: ".concat(e)}),S.reset(j.eg),sessionStorage.removeItem("enhancedSamplingForm")}catch(e){console.error("Failed to submit enhanced sampling job:",e),t({title:"Submission Failed",description:e.message||"An unknown error occurred.",variant:"destructive"})}}let F=S.watch("topology"),B=S.watch("configuration"),T=S.watch("nucleotideIndexes0"),A=S.watch("nucleotideIndexes1");return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.lV,{...S,children:(0,s.jsxs)("form",{onSubmit:S.handleSubmit(z),className:"space-y-8",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsxs)(v.Zp,{children:[(0,s.jsx)(v.aR,{children:(0,s.jsx)(v.ZB,{className:"font-headline text-lg",children:"Required Parameters"})}),(0,s.jsxs)(v.Wu,{className:"space-y-4",children:[(0,s.jsx)(c.zB,{control:S.control,name:"jobName",render:e=>{var t;let{field:n}=e;return(0,s.jsxs)(c.eI,{children:[(0,s.jsx)(c.lR,{children:"Job Name"}),(0,s.jsx)(c.MJ,{children:(0,s.jsx)(d.p,{placeholder:"A descriptive name for your job",...n,value:null!=(t=n.value)?t:""})}),(0,s.jsx)(c.Rr,{children:"Provide a descriptive name for your job to easily identify it in your job history."}),(0,s.jsx)(c.C5,{})]})}}),(0,s.jsx)(c.zB,{control:S.control,name:"samplingType",render:e=>{let{field:t}=e;return(0,s.jsxs)(c.eI,{className:"space-y-3",children:[(0,s.jsx)(c.lR,{children:"Sampling Type"}),(0,s.jsx)(c.MJ,{children:(0,s.jsxs)(p.z,{onValueChange:t.onChange,defaultValue:t.value,className:"flex space-x-4",children:[(0,s.jsxs)(c.eI,{className:"flex items-center space-x-2",children:[(0,s.jsx)(c.MJ,{children:(0,s.jsx)(p.C,{value:"Umbrella"})}),(0,s.jsx)(c.lR,{className:"font-normal",children:"Umbrella Sampling"})]}),(0,s.jsxs)(c.eI,{className:"flex items-center space-x-2",children:[(0,s.jsx)(c.MJ,{children:(0,s.jsx)(p.C,{value:"ForwardFlux"})}),(0,s.jsx)(c.lR,{className:"font-normal",children:"Forward Flux"})]})]})}),(0,s.jsx)(c.C5,{})]})}}),(0,s.jsx)(c.zB,{control:S.control,name:"topology",render:()=>(0,s.jsxs)(c.eI,{children:[(0,s.jsx)(c.lR,{children:"Topology File"}),(0,s.jsx)(c.MJ,{children:(0,s.jsx)(d.p,{type:"file",onChange:e=>V(e,"topology")})}),(0,s.jsx)(c.Rr,{children:"Upload the oxDNA topology file (`.top`) that defines the structure and connectivity of your system."}),(0,s.jsx)(c.C5,{})]})}),(0,s.jsx)(c.zB,{control:S.control,name:"configuration",render:()=>(0,s.jsxs)(c.eI,{children:[(0,s.jsx)(c.lR,{children:"Configuration File"}),(0,s.jsx)(c.MJ,{children:(0,s.jsx)(d.p,{type:"file",onChange:e=>V(e,"configuration")})}),(0,s.jsx)(c.Rr,{children:"Upload an equilibrated oxDNA conformation file (`.dat`) representing the starting state of your simulation."}),(0,s.jsx)(c.C5,{})]})}),(0,s.jsx)(c.zB,{control:S.control,name:"nucleotideIndexes0",render:e=>{let{field:t}=e;return(0,s.jsxs)(c.eI,{children:[(0,s.jsx)(c.lR,{children:"Nucleotide Indexes 0"}),(0,s.jsx)(c.MJ,{children:(0,s.jsx)(d.p,{placeholder:"10, 11, 12, 16, 9",...t})}),(0,s.jsx)(c.Rr,{children:"Enter the comma-separated particle IDs (from oxView) that define the first group for distance measurement (center of mass 0)."}),(0,s.jsx)(c.C5,{})]})}}),(0,s.jsx)(c.zB,{control:S.control,name:"nucleotideIndexes1",render:e=>{let{field:t}=e;return(0,s.jsxs)(c.eI,{children:[(0,s.jsx)(c.lR,{children:"Nucleotide Indexes 1"}),(0,s.jsx)(c.MJ,{children:(0,s.jsx)(d.p,{placeholder:"14, 21, 30",...t})}),(0,s.jsx)(c.Rr,{children:"Enter the comma-separated particle IDs (from oxView) that define the second group for distance measurement (center of mass 1)."}),(0,s.jsx)(c.C5,{})]})}}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(c.zB,{control:S.control,name:"xmin",render:e=>{let{field:t}=e;return(0,s.jsxs)(c.eI,{children:[(0,s.jsx)(c.lR,{children:"X Minimum"}),(0,s.jsx)(c.MJ,{children:(0,s.jsx)(d.p,{type:"number",step:"0.01",...t})}),(0,s.jsx)(c.C5,{})]})}}),(0,s.jsx)(c.zB,{control:S.control,name:"xmax",render:e=>{let{field:t}=e;return(0,s.jsxs)(c.eI,{children:[(0,s.jsx)(c.lR,{children:"X Maximum"}),(0,s.jsx)(c.MJ,{children:(0,s.jsx)(d.p,{type:"number",step:"0.01",...t})}),(0,s.jsx)(c.C5,{})]})}})]}),(0,s.jsx)(c.zB,{control:S.control,name:"testPreEq",render:e=>{let{field:t}=e;return(0,s.jsxs)(c.eI,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm",children:[(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)(c.lR,{children:"Test Pre-Equilibration"}),(0,s.jsx)(c.Rr,{children:"Perform a short, non-equilibrium pulling simulation to test the reaction coordinate. Highly recommended."})]}),(0,s.jsx)(c.MJ,{children:(0,s.jsx)(u.d,{checked:t.value,onCheckedChange:t.onChange})})]})}})]})]})}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(v.Zp,{children:[(0,s.jsx)(v.aR,{children:(0,s.jsx)(v.ZB,{className:"font-headline text-lg",children:"Key Arguments"})}),(0,s.jsxs)(v.Wu,{className:"space-y-4",children:[(0,s.jsx)(c.zB,{control:S.control,name:"steps",render:e=>{let{field:t}=e;return(0,s.jsxs)(c.eI,{children:[(0,s.jsx)(c.lR,{children:"Production Steps"}),(0,s.jsx)(c.MJ,{children:(0,s.jsx)(d.p,{type:"number",...t})}),(0,s.jsx)(c.Rr,{children:"The number of simulation steps for the production run in each window. More steps lead to better statistics but require more computation time."}),(0,s.jsx)(c.C5,{})]})}}),(0,s.jsx)(c.zB,{control:S.control,name:"T",render:e=>{let{field:t}=e;return(0,s.jsxs)(c.eI,{children:[(0,s.jsx)(c.lR,{children:"Temperature (\xb0C)"}),(0,s.jsx)(c.MJ,{children:(0,s.jsx)(d.p,{placeholder:"e.g., 37",...t})}),(0,s.jsx)(c.Rr,{children:"The temperature (in Celsius) at which the simulation will be performed. "}),(0,s.jsx)(c.C5,{})]})}}),(0,s.jsx)(c.zB,{control:S.control,name:"interactionType",render:e=>{let{field:t}=e;return(0,s.jsxs)(c.eI,{children:[(0,s.jsx)(c.lR,{children:"Interaction Type"}),(0,s.jsxs)(_.l6,{onValueChange:e=>t.onChange(Number(e)),value:String(t.value),children:[(0,s.jsx)(c.MJ,{children:(0,s.jsx)(_.bq,{children:(0,s.jsx)(_.yv,{placeholder:"Select interaction type"})})}),(0,s.jsx)(_.gC,{children:j.XV.map(e=>(0,s.jsx)(_.eb,{value:String(e.value),children:e.label},e.value))})]}),(0,s.jsx)(c.Rr,{children:"Choose the interaction model for the simulation."}),(0,s.jsx)(c.C5,{})]})}}),(0,s.jsx)(c.zB,{control:S.control,name:"saltConc",render:e=>{let{field:t}=e;return(0,s.jsxs)(c.eI,{children:[(0,s.jsx)(c.lR,{children:"Salt Concentration (M)"}),(0,s.jsx)(c.MJ,{children:(0,s.jsx)(d.p,{type:"number",step:"0.01",...t})}),(0,s.jsx)(c.Rr,{children:"Salt concentration in NaCl M (molarity). Affects electrostatic interactions."}),(0,s.jsx)(c.C5,{})]})}}),(0,s.jsx)(c.zB,{control:S.control,name:"nWindows",render:e=>{let{field:t}=e;return(0,s.jsxs)(c.eI,{children:[(0,s.jsx)(c.lR,{children:"Number of Windows"}),(0,s.jsx)(c.MJ,{children:(0,s.jsx)(d.p,{type:"number",...t})}),(0,s.jsx)(c.Rr,{children:"The number of parallel simulations (replicas) to run along the reaction coordinate. "}),(0,s.jsx)(c.C5,{})]})}}),(0,s.jsx)(c.zB,{control:S.control,name:"stiff",render:e=>{let{field:t}=e;return(0,s.jsxs)(c.eI,{children:[(0,s.jsx)(c.lR,{children:"Stiffness of Spring (k)"}),(0,s.jsx)(c.MJ,{children:(0,s.jsx)(d.p,{type:"number",step:"0.1",...t})}),(0,s.jsx)(c.Rr,{children:"The spring constant for the harmonic restraint. Higher values create a stiffer potential, more tightly confining the sampling in each window."}),(0,s.jsx)(c.C5,{})]})}}),(0,s.jsx)(c.zB,{control:S.control,name:"cpus",render:e=>{let{field:t}=e;return(0,s.jsxs)(c.eI,{children:[(0,s.jsx)(c.lR,{children:"CPUs"}),(0,s.jsx)(c.MJ,{children:(0,s.jsx)(d.p,{type:"number",step:"1",min:"1",...t})}),(0,s.jsx)(c.Rr,{children:"Number of CPUs to use. This is automatically set to the number of windows, as each window runs on a separate CPU."}),(0,s.jsx)(c.C5,{})]})}})]})]}),(0,s.jsx)(m.nD,{type:"single",collapsible:!0,className:"w-full",children:(0,s.jsx)(m.As,{value:"item-1",children:(0,s.jsxs)(v.Zp,{children:[(0,s.jsx)(m.$m,{className:"p-6",children:(0,s.jsx)(v.aR,{className:"p-0",children:(0,s.jsx)(v.ZB,{className:"font-headline text-lg",children:"Advanced Parameters"})})}),(0,s.jsx)(m.ub,{children:(0,s.jsxs)(v.Wu,{className:"space-y-4 pt-0",children:[(0,s.jsx)(c.zB,{control:S.control,name:"pullingSteps",render:e=>{let{field:t}=e;return(0,s.jsxs)(c.eI,{children:[(0,s.jsx)(c.lR,{children:"Pulling Steps"}),(0,s.jsx)(c.MJ,{children:(0,s.jsx)(d.p,{type:"number",...t})}),(0,s.jsx)(c.Rr,{children:"Number of steps for the initial, non-equilibrium pulling phase to generate starting conformations for each window."}),(0,s.jsx)(c.C5,{})]})}}),(0,s.jsx)(c.zB,{control:S.control,name:"eqSteps",render:e=>{let{field:t}=e;return(0,s.jsxs)(c.eI,{children:[(0,s.jsx)(c.lR,{children:"Equilibrium Steps"}),(0,s.jsx)(c.MJ,{children:(0,s.jsx)(d.p,{type:"number",...t})}),(0,s.jsx)(c.Rr,{children:"Number of equilibration steps for each window"}),(0,s.jsx)(c.C5,{})]})}}),(0,s.jsx)(c.zB,{control:S.control,name:"protein",render:()=>(0,s.jsxs)(c.eI,{children:[(0,s.jsx)(c.lR,{children:"Protein File (Optional)"}),(0,s.jsx)(c.MJ,{children:(0,s.jsx)(d.p,{type:"file",onChange:e=>V(e,"protein")})}),(0,s.jsx)(c.Rr,{children:"Upload a protein parameter file (`.par`) if your system includes a protein component to be simulated alongside the DNA."}),(0,s.jsx)(c.C5,{})]})}),(0,s.jsx)(c.zB,{control:S.control,name:"forceFile",render:()=>(0,s.jsxs)(c.eI,{children:[(0,s.jsx)(c.lR,{children:"Force File (Optional)"}),(0,s.jsx)(c.MJ,{children:(0,s.jsx)(d.p,{type:"file",onChange:e=>V(e,"forceFile")})}),(0,s.jsx)(c.Rr,{children:"Upload an oxDNA force file to apply additional external forces or restraints during the simulation."}),(0,s.jsx)(c.C5,{})]})})]})})]})})})]})]}),(0,s.jsx)(w.Separator,{}),(0,s.jsxs)("div",{className:"flex items-center gap-4 mt-8",children:[(0,s.jsxs)(a.$,{type:"button",variant:"outline",onClick:()=>{var e;return null==(e=document.getElementById("yaml-upload"))?void 0:e.click()},children:[(0,s.jsx)(g.A,{className:"mr-2 h-4 w-4"}),"Upload YAML"]}),(0,s.jsx)(d.p,{id:"yaml-upload",type:"file",accept:".yaml,.yml",onChange:q,className:"hidden"}),(0,s.jsxs)(a.$,{type:"button",variant:"outline",onClick:()=>{let e=S.getValues(),t={jobName:e.jobName,nucleotide_indexes_0:e.nucleotideIndexes0,nucleotide_indexes_1:e.nucleotideIndexes1,xmin:e.xmin,xmax:e.xmax,stiff:e.stiff,celcius:Number(e.T),molarity:e.saltConc,sequence_dependent:e.sequenceDependent,pulling_steps:e.pullingSteps,equilibration_steps:e.eqSteps,production_steps:e.steps,test_pulling:e.testPreEq,cpu_run:e.cpuRun,n_cpus:e.cpus,n_windows:e.nWindows,interaction_type:e.interactionType},n=new Blob([N.Bh(t)],{type:"text/yaml;charset=utf-8"});(0,C.saveAs)(n,"config.yaml")},children:[(0,s.jsx)(b.A,{className:"mr-2 h-4 w-4"}),"Export YAML"]}),(0,s.jsxs)(a.$,{type:"submit",className:"w-full md:w-auto",children:[(0,s.jsx)(y.A,{className:"mr-2 h-4 w-4"})," Submit Job"]})]})]})}),(0,s.jsxs)("div",{className:"mt-8",children:[(0,s.jsx)(I.Bc,{children:(0,s.jsxs)(I.m_,{children:[(0,s.jsx)(I.k$,{asChild:!0,children:(0,s.jsx)("div",{style:{display:"inline-block"},children:(0,s.jsx)(a.$,{onClick:()=>o(!n),disabled:!F||!B,variant:"outline",style:{pointerEvents:F&&B?"auto":"none"},children:n?"Hide Preview":"oxView Preview"})})}),(!F||!B)&&(0,s.jsx)(I.ZI,{children:(0,s.jsx)("p",{children:"Please upload topology and configuration files to show oxView preview"})})]})}),n&&F&&B&&(0,s.jsx)(R.b,{topFile:F,datFile:B,nucleotideIndexes0:T,nucleotideIndexes1:A})]})]})}},67063:(e,t,n)=>{"use strict";n.d(t,{b:()=>o});var s=n(95155),r=n(12115),i=n(66695);let l=e=>e?/^[0-9,\s]*$/.test(e)?e.split(",").map(e=>parseInt(e.trim(),10)).filter(e=>!isNaN(e)):(console.warn("Invalid characters in nucleotideIndexes. Aborting script generation."),[]):[];function o(e){let{topFile:t,datFile:n,nucleotideIndexes0:o,nucleotideIndexes1:a,height:c="500px",postLoadCommand:d}=e,u=(0,r.useRef)(null);return(0,r.useEffect)(()=>{let e=u.current;if(!(null==e?void 0:e.contentWindow))return;let s=()=>{var s;let r=[{file:t,ext:"top"},{file:n,ext:"dat"}],i=r.map(e=>new Blob([e.file],{type:"text/plain"})),c=r.map(e=>e.ext),u=[],p=l(o);p.length>0&&u.push("colorElements(new THREE.Color(1, 0, 0), api.getElements([".concat(p.join(","),"]))"));let m=l(a);if(m.length>0&&u.push("colorElements(new THREE.Color(0, 0, 1), api.getElements([".concat(m.join(","),"]))")),d&&u.push(d),u.length>0){let e=u.join(";\n");i.push(new Blob([e],{type:"application/javascript"})),c.push("js")}null==(s=e.contentWindow)||s.postMessage({message:"iframe_drop",files:i,ext:c,inbox_settings:["Monomer","Origin"]},"/")};return e.addEventListener("load",s),()=>{e.removeEventListener("load",s)}},[t,n,o,a,d,u]),(0,s.jsxs)(i.Zp,{className:"mt-4",children:[(0,s.jsx)(i.aR,{children:(0,s.jsx)(i.ZB,{children:"Structure Preview"})}),(0,s.jsx)(i.Wu,{children:(0,s.jsx)("iframe",{ref:u,src:"/",width:"100%",height:c,style:{border:"1px solid hsl(var(--border))"},title:"oxDNA Viewer"})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[268,277,507,458,826,499,859,521,9,528,736,512,510,441,303,358],()=>t(2717)),_N_E=e.O()}]);